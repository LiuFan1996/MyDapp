var Web3 = require('web3');

var web3 = new Web3(new Web3.providers.HttpProvider('http://127.0.0.1:7545'));


var abi = '[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"initialSupply","type":"uint256"},{"name":"tokenName","type":"string"},{"name":"tokenSymbol","type":"string"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Approval","type":"event"}]';
var bytecode = '6080604052601260025534801561001557600080fd5b506040516106fe3803806106fe833981016040908152815160208084015183850151600254600a0a84026003819055336000908152600485529586205590850180519395909491019261006a92850190610087565b50805161007e906001906020840190610087565b50505050610122565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100c857805160ff19168380011785556100f5565b828001600101855582156100f5579182015b828111156100f55782518255916020019190600101906100da565b50610101929150610105565b5090565b61011f91905b80821115610101576000815560010161010b565b90565b6105cd806101316000396000f3006080604052600436106100985763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166306fdde03811461009d578063095ea7b31461012757806318160ddd1461015f57806323b872dd14610186578063313ce567146101b057806370a08231146101c557806395d89b41146101e6578063a9059cbb146101fb578063dd62ed3e14610221575b600080fd5b3480156100a957600080fd5b506100b2610248565b6040805160208082528351818301528351919283929083019185019080838360005b838110156100ec5781810151838201526020016100d4565b50505050905090810190601f1680156101195780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561013357600080fd5b5061014b600160a060020a03600435166024356102d6565b604080519115158252519081900360200190f35b34801561016b57600080fd5b5061017461033c565b60408051918252519081900360200190f35b34801561019257600080fd5b5061014b600160a060020a0360043581169060243516604435610342565b3480156101bc57600080fd5b506101746103df565b3480156101d157600080fd5b50610174600160a060020a03600435166103e5565b3480156101f257600080fd5b506100b26103f7565b34801561020757600080fd5b5061021f600160a060020a0360043516602435610451565b005b34801561022d57600080fd5b50610174600160a060020a0360043581169060243516610460565b6000805460408051602060026001851615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156102ce5780601f106102a3576101008083540402835291602001916102ce565b820191906000526020600020905b8154815290600101906020018083116102b157829003601f168201915b505050505081565b336000818152600560209081526040808320600160a060020a038716808552908352818420869055815186815291519394909390927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925928290030190a350600192915050565b60035481565b600160a060020a038316600090815260056020908152604080832033845290915281205482111561037257600080fd5b600160a060020a03841660009081526005602090815260408083203384529091529020546103a6908363ffffffff61047d16565b600160a060020a03851660009081526005602090815260408083203384529091529020556103d5848484610494565b5060019392505050565b60025481565b60046020526000908152604090205481565b60018054604080516020600284861615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156102ce5780601f106102a3576101008083540402835291602001916102ce565b61045c338383610494565b5050565b600560209081526000928352604080842090915290825290205481565b6000808383111561048d57600080fd5b5050900390565b600160a060020a03821615156104a957600080fd5b600160a060020a0383166000908152600460205260409020548111156104ce57600080fd5b600160a060020a0383166000908152600460205260409020546104f7908263ffffffff61047d16565b600160a060020a03808516600090815260046020526040808220939093559084168152205461052c908263ffffffff61058816565b600160a060020a0380841660008181526004602090815260409182902094909455805185815290519193928716927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef92918290030190a3505050565b60008282018381101561059a57600080fd5b93925050505600a165627a7a72305820f0f4e0fdde26d2f27a21316b142543489ce6a3da45bc1357ddc36b6cd3d1eb700029000000000000000000000000000000000000000000000000000000000000010e000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000008546f70546f6b656e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000035455540000000000000000000000000000000000000000000000000000000000';

// 创建合约实例
var MyContract = new web3.eth.Contract(JSON.parse(abi),{
    from:"2Baaf2aF0800e1556a31175915b4720701fF82d0",
    gasPrice:2*10**9,
    gasLimit:3000000,
    data:bytecode
});
// 部署合约到以太坊
MyContract.deploy({data:bytecode,arguments:[200,'TOPTOKEN','TUT']}).send(
    {
        from:"2Baaf2aF0800e1556a31175915b4720701fF82d0",
        gasPrice:2*10**9,
        gasLimit:3000000,
        value:0
    },function (error, TXhash) {
        if (error){
            console.error(error)
        }
        console.log("TXhash"+TXhash);
    }
);





